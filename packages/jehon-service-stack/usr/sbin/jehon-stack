#!/usr/bin/env bash

set -o errexit
set -o pipefail

# shellcheck source-path=SCRIPTDIR/../../../jehon/usr/bin
. jh-lib

# shellcheck source-path=SCRIPTDIR/../bin/
. jh-stack-lib

if [ ! -r "$stackRoot" ]; then
    jh_fatal "No stack found"
fi

cd "$stackRoot"

if [ ! -r .git ]; then
    jh_fatal "No git repository found"
fi

git fetch
git reset --hard origin/master

if [ -x bin/setup.sh ]; then
    bin/setup.sh
fi

if [ -x bin/cron.sh ]; then
    bin/cron.sh
fi
