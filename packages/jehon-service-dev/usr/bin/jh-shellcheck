#!/usr/bin/env bash

set -o errexit

# shellcheck source-path=SCRIPTDIR/../../../jehon/usr/bin/
. jh-lib

exclude="${1:-"ðŸ”’"}"

git ls-files |
    grep --invert-match --extended-regex "$exclude" |
    xargs --no-run-if-empty file --mime-type -f - |
    (grep "x-shellscript" || true) |
    cut --delimiter : --field 1 |
    xargs --no-run-if-empty -- shellcheck --external-sources

ok
