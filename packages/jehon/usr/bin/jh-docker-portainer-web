#!/usr/bin/env bash

# Start portainer

if [ "$1" = "stop" ]; then
	docker stop portainer
	ufw delete allow from fe80::0/64 to any app jh-portainer
else
	ufw allow from fe80::0/64 to any app jh-portainer

	docker stop portainer &>/dev/null || true
	docker container rm portainer &>/dev/null || true

	echo "Password: me is nothing"
	#
	# TODO: add password on line: https://docs.portainer.io/advanced/cli
	#
	docker run --name portainer \
		-d --restart=always \
		-p "[::]:9000:9000" \
		-v /var/run/docker.sock:/var/run/docker.sock \
		-v /opt/docker/portainer:/data \
		portainer/portainer
fi
