---

all:
  vars:
    # Avoid undefined in playbook:
    virtual: false
    jehon_always_connected: false
    jehon_headless: false
  hosts:
    dev:
      ansible_host: localhost
      # ansible_connection: local
      ansible_become: true
      cloud_type: pcloud-rw
      cloud_cache_size: 20G
      cloud_mount:
        Musiques: rw
        Photos: rw
        Videos: rw
      # TODO: should detect automatically...
      # jehon_hardware: wsl
      jehon_repo_docker: true
      jehon_repo_mopidy: true
      ## Depend also on the OS
      jehon_testing: 75
    kiosk:
      ansible_host: "{{ jehon.ip.kiosk }}"
      jehon_always_connected: true
      jehon_ip: "{{ jehon.ip.kiosk }}"
      jehon_hardware: raspberrypi
      jehon_tty: 11
      synology:
        username: "systeme-kiosk"
        password: !vault |
                  $ANSIBLE_VAULT;1.1;AES256
                  62646333303730346630346232376637346131316663633361313533373435366334666139393466
                  3032623166383938323766643430326637373363313465650a666362353264313437366230623838
                  32326265343833616662353964363765356363313831326363333038626132613937346636623831
                  6530613235303634360a623436323531623064626466353238633339363237326664353436346331
                  3832
    piscine:
      ansible_host: "{{ jehon.ip.piscine }}"
      jehon_always_connected: true
      jehon_ip: "{{ jehon.ip.piscine }}"
      jehon_hardware: raspberrypi
      jehon_tty: 10
      synology:
        username: systeme-piscine
        password: !vault |
                  $ANSIBLE_VAULT;1.1;AES256
                  63616334646464663236396632343737663831376533346362653239356330643339626164653264
                  3334623161643835313930633365653135373530383735390a353435616135653865666133363162
                  31396236303062326435666530303431303332623266313065643665316661323535333534623163
                  3335346230386461370a353966363632303233313634336534326536376437386665373566396231
                  3161
    synology:
      # We use also the /etc/ssh/ssh_config.d/jehon.conf
      # See https://serverfault.com/a/926506/275843
      ansible_port: 2022
      ansible_user: jehon
      ansible_ssh_pass: !vault |
                        $ANSIBLE_VAULT;1.1;AES256
                        30313831663439333738343563313731656361646338386136356361343465323435363834633730
                        3137626131336466616135653232393233653337363537320a353835313738643537633234633163
                        34666638343639323136643564623131303861333766343333353935353638336333353962366137
                        6131386533336333610a623135313364643461376666666139326462656135613137613162653265
                        3961
      ansible_remote_tmp: /volume1/scripts/.ansible-tmp
      ansible_pipelining: true
      ansible_ssh_transfer_method: piped
      data_volume: /volume1
      script_folder: /volume1/scripts/scripts
  children:
    grp_jehon:
      # All system that get jehon.deb and the follow-up
      hosts:
        dev:
        kiosk:
        piscine:
    grp_servers:
      hosts:
        kiosk:
        piscine:
      vars:
        cloud_type: home
        cloud_cache_size: 10M
        cloud_mount:
          Musiques: ro
          Photos: ro
          Videos: ro
        jehon_always_connected: true
        jehon_headless: true
        jehon_repo_mopidy: true
