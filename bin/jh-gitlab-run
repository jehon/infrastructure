#!/usr/bin/env bash

set -o errexit
set -o pipefail
shopt -s nullglob

# _SD="$(dirname "$(realpath "${BASH_SOURCE[0]}")")"

### FIXME: UNTESTED

# Thanks to https://stackoverflow.com/a/72537514/1954789

docker run --rm \
    -v /var/run/docker.sock:/var/run/docker.sock \
    -v "$(pwd):/workspace" \
    --workdir /workspace \
    --privileged \
    --entrypoint="gitlab-runner" \
    gitlab/gitlab-runner:latest exec docker MY_JOB

# Other solution: https://stackoverflow.com/a/36358790/1954789
# From https://stackoverflow.com/questions/32933174/use-gitlab-ci-to-run-tests-locally
